<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Bootstrap demo</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="style.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script src="https://www.google.com/recaptcha/api.js" async defer></script>
  <style>
    /* Add your CSS styles here */
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
    }

    .container {
      max-width: 800px;
      margin: 0 auto;
      padding: 20px;
    }

    .table {
      background-color: black;
      color: black;
      width: 65%;
    }

    .table th {
      background-color: black;
      color: white;
    }

    .table td {
      background-color: black;
      color: white;
    }

    .timer {
      position: relative;
      top: 0px;
      right: 0px;
      font-size: 16px;
      color: red;
    }

    .ticket-select {
      color: red;
      appearance: none;
      -webkit-appearance: none;
      -moz-appearance: none;
      background-image: url('data:image/svg+xml;utf8,<svg fill="black" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M7 10l5 5 5-5z"/></svg>');
      background-repeat: no-repeat;
      background-position: right 10px top 50%;
      padding-right: 20px;
      /* Adjust the padding to position the icon correctly */
    }
  </style>
</head>

<body>
  <nav class="navbar navbar-dark bg-dark fixed-top">
    <div class="container-fluid">
      <button class="navbar-toggler" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasDarkNavbar"
        aria-controls="offcanvasDarkNavbar" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="offcanvas offcanvas-start text-bg-dark" tabindex="-1" id="offcanvasDarkNavbar"
        aria-labelledby="offcanvasDarkNavbarLabel">
        <div class="offcanvas-header">
          <h5 class="offcanvas-title" id="offcanvasDarkNavbarLabel">Nuplex Cinema</h5>
          <button type="button" class="btn-close btn-close-white" data-bs-dismiss="offcanvas"
            aria-label="Close"></button>
        </div>
        <div class="offcanvas-body">
          <ul class="navbar-nav justify-content-end flex-grow-1 pe-3">
            <li class="nav-item">
              <a class="nav-link active" aria-current="page" href="AboutUs.html">About US</a>
            </li>
            <li class="nav-item">
              <a class="nav-link active" href="price.html">Ticket Info</a>
            </li>
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle active" href="#" role="button" data-bs-toggle="dropdown"
                aria-expanded="false">
                Movies
              </a>
              <ul class="dropdown-menu dropdown-menu-dark">
                <li><a class="dropdown-item" href="#">Now Showing</a></li>
                <li><a class="dropdown-item" href="#">Upcoming Movies</a></li>
                <li>
                  <hr class="dropdown-divider">
                </li>
              </ul>
            </li>
          </ul>
        </div>
      </div>
      <a class="navbar-brand mx-auto" href="#">

      </a>
      <img src="img1.jpg" class="rounded mx-auto d-block" width="115" height="80">
      <form class="d-flex mt-3 ms-auto m" role="search">
        <input class="form-control me-2" type="search" placeholder="Search" aria-label="Search">
        <button class="btn btn-success" type="submit">Search</button>
      </form>
    </div>
  </nav>

  <div class="text-center">
    <img src="img1.jpg" class="rounded" width="600" height="450">
  </div>
  <br>

  <div class="container-md" id="contactForm">
    <br>
    <h4 class="fw-bold">Select Tickets</h4>
    <p id="timer" class="timer" style="display: inline-block; margin-left: 20px;">Timer: 05:00</p>
    <p id="errorMessage" style="display: none; color: red;">Error: Timed Out</p>

    <p>Select the number and type of tickets you wish to buy. Please note seats are reserved on a best available
      basis.<br>
      You can buy a maximum of 9 tickets per transaction. Convenience Fee of Rs 50 per ticket will be charged.</p>

    <br><br><br><br>

    <table class="table">
      <thead>
        <tr>
          <th>Ticket</th>
          <th>Cost</th>
          <th>Qty</th>
          <th>Subtotal</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>
            <div class="form-group">
              <select class="form-control ticket-select" style="color: red;">
                <option value="e-standard">E-Standard</option>
                <option value="3d-standard">3D-Standard</option>
              </select>
            </div>
          </td>
          <td>
            <div class="ticket-cost">1000</div>
          </td>
          <td>
            <div class="input-group" style="width: 100px;">
              <button class="btn btn-outline-secondary decrement-btn" type="button">-</button>
              <input type="text" class="form-control quantity-input" value="1">
              <button class="btn btn-outline-secondary increment-btn" type="button">+</button>
            </div>
          </td>
          <td>
            <div class="subtotal">1000</div>
          </td>
        </tr>
        <tr>
          <td>Convenience Fee</td>
          <td>50</td>
          <td></td>
          <td class="convenience-fee">50</td> <!-- Update to class convenience-fee -->
        </tr>
        <tr>
          <td>Total</td>
          <td></td>
          <td></td>
          <td class="total-cost">1050</td>
        </tr>
      </tbody>
    </table>
    <div class="d-grid gap-2 col-6 mx-auto">
      <button class="btn btn-primary" id="nextButton" type="button" style="margin-left: 45%; width: 45%;">Next</button>
    </div>
    <br>
    <h3>Terms and Conditions:</h3>
    <ol>
      <li>Kindly make sure to bring the credit card you have used for online booking and SMS/Email received from ME
        Cinemas to collect your tickets for verification.</li>
      <li>Children under 4 years of age are not allowed at ME Cinemas Complexes.</li>
      <li>If any movie is rated as A (Adults Only) by the censor board, below 18 years individuals will not be allowed.
        Kindly bring your CNIC card for age verification.</li>
    </ol>
    <br>
  </div>

  <nav class="navbar" id="nav">
    <div class="container-fluid">

      <img src="img1.jpg" class="navbar-bran" width="150" height="120">
      <div class="social-iconss">
        <h4>STAY IN TOUCH</h4>
        <a href="#"><img src="https://png.pngtree.com/element_our/sm/20180515/sm_5afaf0c36298b.jpg" alt="Facebook"
            width="45" height="40"></a>
        <a href="#"><img
            src="https://upload.wikimedia.org/wikipedia/commons/thumb/5/5a/X_icon_2.svg/2048px-X_icon_2.svg.png"
            alt="Twitter" width="35" height="30"></a>
        <a href="#"><img
            src="https://upload.wikimedia.org/wikipedia/commons/thumb/a/a5/Instagram_icon.png/2048px-Instagram_icon.png"
            alt="Instagram" width="35" height="30"></a>
      </div>
      <ul class="option">
        <li><a href="about.html"">About Us</a></li>
        <li><a href=" price.html">Ticket Info</a></li>
        <li><a href="contact.html">Contact Us</a></li>
      </ul>
    </div>
  </nav>

  <div class="container">
    <p>&copy; Copyright 2024 ZSM Management System. All Rights Reserved. Can be used by Anyone </p>
  </div>

  <script>
    window.onload = function () {
      // Retrieve the image source from the URL query parameter
      var queryParams = new URLSearchParams(window.location.search);
      var imageSrc = queryParams.get('imageSrc');
      // Set the image source to the img element
      document.getElementById('movieImage').src = decodeURIComponent(imageSrc);
    }
    $(document).ready(function () {
      // Calculate subtotal when the ticket type changes
      $(".ticket-select").change(function () {
        var ticketType = $(this).val();
        var ticketCost = ticketType === "e-standard" ? 1000 : 1500;
        $(this).closest("tr").find(".ticket-cost").text(ticketCost);
        updateSubtotal($(this).closest("tr"));
      });

      $(".increment-btn").click(function () {
        var inputField = $(this).siblings(".quantity-input");
        var newValue = parseInt(inputField.val()) + 1;
        if (newValue <= 9) { // Check if new value is less than or equal to 9
          inputField.val(newValue);
          updateSubtotal($(this).closest("tr"));
        }
      });

      $(".decrement-btn").click(function () {
        var inputField = $(this).siblings(".quantity-input");
        var newValue = parseInt(inputField.val()) - 1;
        if (newValue < 1) newValue = 1;
        inputField.val(newValue);
        updateSubtotal($(this).closest("tr"));
      });

      // Update subtotal
      function updateSubtotal(row) {
        var ticketCost = parseInt(row.find(".ticket-cost").text());
        var quantity = parseInt(row.find(".quantity-input").val());
        var subtotal = ticketCost * quantity;
        row.find(".subtotal").text(subtotal);

        // Update convenience fee
        var convenienceFee = quantity * 50; // Rs 50 per ticket
        row.closest("tbody").find(".convenience-fee").text(convenienceFee);

        // Update total cost
        var total = 0;
        row.closest("tbody").find(".subtotal").each(function () {
          total += parseInt($(this).text());
        });
        total += parseInt(row.closest("tbody").find(".convenience-fee").text());
        row.closest("tbody").find(".total-cost").text(total);
      }
    });

    $(document).ready(function () {
      // Timer countdown
      var countDownDate = new Date().getTime() + 5 * 60 * 1000; // 5 minutes
      var x = setInterval(function () {
        var now = new Date().getTime();
        var distance = countDownDate - now;
        var minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
        var seconds = Math.floor((distance % (1000 * 60)) / 1000);

        document.getElementById("timer").innerHTML = "Timer: " + minutes + ":" + seconds;

        if (distance < 0) {
          clearInterval(x);
          document.getElementById("timer").innerHTML = "Timer: 00:00";
          document.getElementById("contactForm").innerHTML = '<p id="errorMessage" style="color: red;">Error: Timed Out</p>';
        }
      }, 1000);
    });

    var nextButton = document.getElementById("nextButton");
    // Add click event listener to the Next button
    nextButton.addEventListener("click", function () {
      // Redirect to contact.html
      window.location.href = "details.html";
    });
  </script>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
    crossorigin="anonymous"></script>
</body>

</html>